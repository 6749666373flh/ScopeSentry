import{d as e,dF as l,r as a,s as o,o as t,i as s,w as u,e as n,a as i,L as r,M as m,y as d,t as p,l as v}from"./index-vMt5tOuI.js";import{a as c,E as f}from"./el-form-CrZErb9v.js";import{E as g,a as b}from"./el-col-CK66atlO.js";import{E as _}from"./el-divider-RjUq80nQ.js";import"./el-tag-C3mt1pWb.js";import"./el-popper-CJZHtU_A.js";import{E as h}from"./el-select-v2-iqUJrQ5P.js";import{j,o as y,T as w}from"./index-C-2TW2bY.js";import{u as V,c as x}from"./index-Cei3qRzy.js";const F=e({__name:"Detail",props:{closeDialog:{type:Function},getList:{type:Function},pocForm:{}},setup(e){const{t:F}=v(),k=[j(),y],E=e,{pocForm:M}=l(E),q=a({...M.value}),D=o({name:[{required:!0,message:F("poc.nameMsg"),trigger:"blur"}],level:[{required:!0,message:F("poc.contentMsg"),trigger:"blur"}]}),L=[{value:6,label:"critical"},{value:5,label:"high"},{value:4,label:"medium"},{value:3,label:"low"},{value:2,label:"info"},{value:1,label:"unkown"}],U=a(!1),z=a();return(e,l)=>(t(),s(i(f),{model:q.value,"label-width":"120px",rules:D,"status-icon":"",ref_key:"ruleFormRef",ref:z},{default:u((()=>[n(i(c),{label:i(F)("poc.pocName"),prop:"name"},{default:u((()=>[n(i(r),{modelValue:q.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>q.value.name=e),placeholder:i(F)("poc.nameMsg")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),n(i(c),{label:i(F)("poc.content"),prop:"content"},{default:u((()=>[n(i(w),{modelValue:q.value.content,"onUpdate:modelValue":l[1]||(l[1]=e=>q.value.content=e),style:{height:"600px",width:"100%"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:k},null,8,["modelValue"])])),_:1},8,["label"]),n(i(c),{label:i(F)("poc.level")},{default:u((()=>[n(i(h),{modelValue:q.value.level,"onUpdate:modelValue":l[2]||(l[2]=e=>q.value.level=e),placeholder:"Please select level",options:L},null,8,["modelValue"])])),_:1},8,["label"]),n(i(_)),n(i(b),null,{default:u((()=>[n(i(g),{span:2,offset:8},{default:u((()=>[n(i(c),null,{default:u((()=>[n(i(m),{type:"primary",onClick:l[3]||(l[3]=e=>(async e=>{U.value=!0,e&&await e.validate((async(e,l)=>{if(e){let e;e=""!=q.value.id?await V(q.value.id,q.value.name,q.value.content,q.value.level):await x(q.value.name,q.value.content,q.value.level),200===e.code&&(E.getList(),E.closeDialog()),U.value=!1}else U.value=!1}))})(z.value)),loading:U.value},{default:u((()=>[d(p(i(F)("task.save")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"]))}});export{F as _};
