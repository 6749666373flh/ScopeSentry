import{d as e,B as t,K as l,r as a,s as o,e as s,L as i,y as n,o as r,i as m,w as d,a as u,M as p,j as c,l as h,J as b,Q as f,_ as v}from"./index-vMt5tOuI.js";import{u as g}from"./useTable-DO6t6Zuf.js";import{E as j}from"./el-card-CiG9T01-.js";import{E as y,a as x}from"./el-col-CK66atlO.js";import{_ as S}from"./Table.vue_vue_type_script_lang-kKqRQLK4.js";import{u as _}from"./useCrudSchemas-gxupr6De.js";import{d as w}from"./index-DwbfGW3A.js";import{r as C}from"./index-DO8QlVWZ.js";import"./el-table-column-Ty7HKRWd.js";import"./el-popper-CJZHtU_A.js";import"./index-DMmJY3Ph.js";import"./isEqual-D2Iw95Gj.js";import"./debounce-heHWUU1E.js";import"./el-checkbox-DZAdOJwr.js";import"./isArrayLikeObject-4WqnSTxS.js";import"./raf-RUFdlNuH.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-tag-C3mt1pWb.js";import"./el-select-oq3jOrDj.js";import"./useInput-CPyPMgc8.js";import"./el-image-viewer-CkZtWhln.js";import"./tsxHelper-C3yG_Ynk.js";import"./el-dropdown-item-C2usTBce.js";import"./castArray-DsRHGUHq.js";import"./refs-B-F76yq7.js";import"./index-BjDunm1X.js";import"./tree-BfZhwLPs.js";import"./index-znw49gEj.js";const E=v(e({__name:"Subdomain",setup(e){const{t:v}=h(),{query:E}=t();l((()=>{A(),window.addEventListener("resize",A)}));const T=a(0),A=()=>{const e=window.innerHeight||document.documentElement.clientHeight;T.value=.8*e};a("");const N=o({});N.project=[E.id];const V=async e=>{Object.assign(N,e),L()},W=o([{field:"selection",type:"selection",minWidth:"55"},{field:"index",label:v("tableDemo.index"),type:"index",minWidth:"30"},{field:"host",label:v("subdomain.subdomainName"),minWidth:"200",slots:{header:()=>s("div",null,[s("span",null,[v("subdomain.subdomainName")]),s(i,{modelValue:D.value,"onUpdate:modelValue":e=>D.value=e,placeholder:"Search",style:"width: 200px; margin-left: 10px;",size:"small",onChange:()=>F("sub_host")},null)])}},{field:"type",label:v("subdomain.recordType"),minWidth:"200",columnKey:"type",filters:[{text:"A",value:"A"},{text:"NS",value:"NS"},{text:"CNAME",value:"CNAME"},{text:"PTR",value:"PTR"},{text:"TXT",value:"TXT"}]},{field:"value",label:v("subdomain.recordValue"),minWidth:"250",formatter:(e,t,l)=>{let a="";return l.forEach(((e,t)=>{a+=`${e}\r\n`})),a},slots:{header:()=>s("div",null,[s("span",null,[v("subdomain.recordValue")]),s(i,{modelValue:H.value,"onUpdate:modelValue":e=>H.value=e,placeholder:"Search",style:"width: 200px; margin-left: 10px;",size:"small",onChange:()=>F("sub_value")},null)])}},{field:"ip",label:"IP",minWidth:"150",formatter:(e,t,l)=>{let a="";return l.forEach(((e,t)=>{a+=`${e}\r\n`})),a},slots:{header:()=>s("div",null,[s("span",null,[n("IP")]),s(i,{modelValue:K.value,"onUpdate:modelValue":e=>K.value=e,placeholder:"Search",style:"width: 180px; margin-left: 10px;",size:"small",onChange:()=>F("sub_ip")},null)])}},{field:"time",label:v("asset.time"),minWidth:"200"}]),{allSchemas:R}=_(W),{tableRegister:z,tableState:I,tableMethods:k}=g({fetchDataApi:async()=>({list:(await w("",N,q)).data.list}),immediate:!0}),{loading:M,dataList:U}=I,{getList:L,getElTableExpose:P}=k;function B(){return{background:"var(--el-fill-color-light)"}}const D=a(""),H=a(""),K=a(""),q=o({}),F=async e=>{let t="";"sub_host"==e&&(t=D.value),"sub_value"==e&&(t=H.value),"sub_ip"==e&&(t=K.value),q[e]=t,L()},O=a([]),X=async()=>{b.confirm("Whether to delete?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{const e=await P(),t=(null==e?void 0:e.getSelectionRows())||[];O.value=t.map((e=>e.id)),await C(O.value,"subdomain"),L()})).catch((()=>{f({type:"info",message:"Delete canceled"})}))};let $=a(!1);const J=async()=>{const e=await P(),t=(null==e?void 0:e.getSelectionRows())||[];O.value=t.map((e=>e.id)),0!=O.value.length?$.value=!0:$.value=!1};return(e,t)=>(r(),m(u(x),null,{default:d((()=>[s(u(y),null,{default:d((()=>[s(u(j),{style:{height:"min-content"}},{default:d((()=>[u($)?(r(),m(u(p),{key:0,onClick:X,type:"danger",size:"small"},{default:d((()=>[n("Dlete")])),_:1})):c("",!0),s(u(S),{columns:u(R).tableColumns,data:u(U),stripe:"","max-height":T.value,border:!0,loading:u(M),onSelectionChange:J,rowKey:"id",resizable:!0,onRegister:u(z),onFilterChange:V,headerCellStyle:B,style:{fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji"}},null,8,["columns","data","max-height","loading","onRegister"])])),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-7358d451"]]);export{E as default};
