import{d as a,dF as e,r as l,K as u,o,i as t,w as r,e as d,a as n,L as m,M as s,y as i,t as v,l as c}from"./index-C75x1W_q.js";import{a as p,E as f}from"./el-form-BuKnlznG.js";import{E as T,a as h}from"./el-col-DgdPSEMf.js";import{E as V}from"./el-switch-BQaU2iQr.js";import{E as b}from"./el-divider-CiB4UXSP.js";import{E as x}from"./el-text-BJjANnhE.js";import{u as _}from"./index-Q0xmndJ5.js";const g=a({__name:"Configuration",props:{closeDialog:{type:Function},getList:{type:Function},nodeConfForm:{}},setup(a){const{t:g}=c(),w=a,{nodeConfForm:N}=e(w),k=l({...N.value}),y=l(!1),U=l(!1),M=l(!1);u((()=>{"1"===k.value.state?(M.value=!0,U.value=!1):"2"===k.value.state?(M.value=!1,U.value=!1):"3"===k.value.state&&(M.value=!1,U.value=!0)}));const j=l(),E=k.value.name;return(a,e)=>(o(),t(n(f),{model:k.value,"label-width":"auto","status-icon":"",ref_key:"ruleFormRef",ref:j},{default:r((()=>[d(n(p),{label:n(g)("node.nodeName"),prop:"name"},{default:r((()=>[d(n(m),{modelValue:k.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>k.value.name=a)},null,8,["modelValue"])])),_:1},8,["label"]),d(n(p),{label:n(g)("configuration.maxTaskNum"),prop:"MaxTaskNum"},{default:r((()=>[d(n(m),{modelValue:k.value.maxTaskNum,"onUpdate:modelValue":e[1]||(e[1]=a=>k.value.maxTaskNum=a)},null,8,["modelValue"])])),_:1},8,["label"]),d(n(p),{label:n(g)("configuration.portScanThread"),prop:"portscanThread"},{default:r((()=>[d(n(m),{modelValue:k.value.portscanThread,"onUpdate:modelValue":e[2]||(e[2]=a=>k.value.portscanThread=a)},null,8,["modelValue"])])),_:1},8,["label"]),d(n(p),{label:n(g)("configuration.dirScanThread"),prop:"dirscanThread"},{default:r((()=>[d(n(m),{modelValue:k.value.dirscanThread,"onUpdate:modelValue":e[3]||(e[3]=a=>k.value.dirscanThread=a)},null,8,["modelValue"])])),_:1},8,["label"]),d(n(p),{label:n(g)("configuration.crawlerThread"),prop:"crawlerThread"},{default:r((()=>[d(n(m),{modelValue:k.value.crawlerThread,"onUpdate:modelValue":e[4]||(e[4]=a=>k.value.crawlerThread=a)},null,8,["modelValue"])])),_:1},8,["label"]),d(n(p),{label:n(g)("configuration.urlThread"),prop:"MaxTaskNum"},{default:r((()=>[d(n(m),{modelValue:k.value.urlThread,"onUpdate:modelValue":e[5]||(e[5]=a=>k.value.urlThread=a)},null,8,["modelValue"])])),_:1},8,["label"]),d(n(p),{label:n(g)("configuration.maxUrlNum"),prop:"MaxTaskNum"},{default:r((()=>[d(n(m),{modelValue:k.value.urlMaxNum,"onUpdate:modelValue":e[6]||(e[6]=a=>k.value.urlMaxNum=a)},null,8,["modelValue"])])),_:1},8,["label"]),d(n(p),{label:n(g)("common.state")},{default:r((()=>[d(n(V),{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=a=>M.value=a),"inline-prompt":"","active-text":n(g)("common.switchAction"),"inactive-text":n(g)("common.switchInactive"),disabled:U.value},null,8,["modelValue","active-text","inactive-text","disabled"])])),_:1},8,["label"]),d(n(h),null,{default:r((()=>[d(n(T),{span:16,offset:8},{default:r((()=>[d(n(p),null,{default:r((()=>[d(n(s),{type:"primary",onClick:e[8]||(e[8]=a=>(async a=>{y.value=!0,a&&await a.validate((async(a,e)=>{if(a){let a;a=await _(E,k.value.name,k.value.maxTaskNum,k.value.dirscanThread,k.value.portscanThread,k.value.crawlerThread,M.value,k.value.urlThread,k.value.urlMaxNum),200===a.code&&(w.getList(),w.closeDialog()),y.value=!1}else y.value=!1}))})(j.value)),loading:y.value},{default:r((()=>[i(v(n(g)("task.save")),1)])),_:1},8,["loading"]),d(n(b),{direction:"vertical"}),d(n(x),{size:"small",type:"danger"},{default:r((()=>[i(v(n(g)("configuration.threadMsg")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"]))}});export{g as _};
