import{d as e,B as t,K as l,r as a,s as o,e as s,y as i,F as n,L as r,o as m,i as u,w as d,a as p,M as c,j as h,O as f,l as b,J as j,Q as v,_ as g}from"./index-C75x1W_q.js";import{u as y}from"./useTable-Csp4_-i9.js";import{E as x}from"./el-card-B54lVHaN.js";import{E as S,a as _}from"./el-col-DgdPSEMf.js";import{E as w}from"./el-text-BJjANnhE.js";import{_ as E}from"./Table.vue_vue_type_script_lang-a6bm3afC.js";import{u as C}from"./useCrudSchemas-CGM66xm5.js";import{d as T}from"./index-7HZtSkXG.js";import{r as A}from"./index-CLMYWd3G.js";import"./el-table-column-DCN4Lp6f.js";import"./el-popper-B4X-nZEc.js";import"./index-BjT9vIQp.js";import"./isEqual-BHgupMbx.js";import"./debounce-B1dqoIRt.js";import"./el-checkbox-DNn0VEEC.js";import"./isArrayLikeObject-f_cYQsBX.js";import"./raf-C1Ndsx6C.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-tag-sJbhYsGb.js";import"./el-select-DpD7cK3l.js";import"./useInput-CL83Kqek.js";import"./el-image-viewer-18KIcjBl.js";import"./tsxHelper-eKzA9uIm.js";import"./el-dropdown-item-lD4tMeV-.js";import"./castArray-CbnyB5vx.js";import"./refs-B1ngtnm_.js";import"./index-BOnf2JCp.js";import"./tree-BfZhwLPs.js";import"./index-CU1g1Qmh.js";const N=g(e({__name:"Subdomain",setup(e){const{t:g}=b(),{query:N}=t();l((()=>{V(),window.addEventListener("resize",V)}));const W=a(0),V=()=>{const e=window.innerHeight||document.documentElement.clientHeight;W.value=.8*e};a("");const R=o({});R.project=[N.id];const z=async e=>{Object.assign(R,e),B()},I=o([{field:"selection",type:"selection",minWidth:"55"},{field:"index",label:g("tableDemo.index"),type:"index",minWidth:"30"},{field:"host",label:g("subdomain.subdomainName"),minWidth:"200",formatter:(e,t,l)=>{return s(n,null,[s(w,null,(a=l,"function"==typeof a||"[object Object]"===Object.prototype.toString.call(a)&&!f(a)?l:{default:()=>[l]})),s(w,{type:"info"},{default:()=>[i("("),e.count,i(")")]})]);var a},slots:{header:()=>s("div",null,[s("span",null,[g("subdomain.subdomainName")]),s(r,{modelValue:H.value,"onUpdate:modelValue":e=>H.value=e,placeholder:"Search",style:"width: 200px; margin-left: 10px;",size:"small",onChange:()=>$("sub_host")},null)])}},{field:"type",label:g("subdomain.recordType"),minWidth:"200",columnKey:"type",filters:[{text:"A",value:"A"},{text:"NS",value:"NS"},{text:"CNAME",value:"CNAME"},{text:"PTR",value:"PTR"},{text:"TXT",value:"TXT"}]},{field:"value",label:g("subdomain.recordValue"),minWidth:"250",formatter:(e,t,l)=>{let a="";return l.forEach(((e,t)=>{a+=`${e}\r\n`})),a},slots:{header:()=>s("div",null,[s("span",null,[g("subdomain.recordValue")]),s(r,{modelValue:K.value,"onUpdate:modelValue":e=>K.value=e,placeholder:"Search",style:"width: 200px; margin-left: 10px;",size:"small",onChange:()=>$("sub_value")},null)])}},{field:"ip",label:"IP",minWidth:"150",formatter:(e,t,l)=>{let a="";return l.forEach(((e,t)=>{a+=`${e}\r\n`})),a},slots:{header:()=>s("div",null,[s("span",null,[i("IP")]),s(r,{modelValue:q.value,"onUpdate:modelValue":e=>q.value=e,placeholder:"Search",style:"width: 180px; margin-left: 10px;",size:"small",onChange:()=>$("sub_ip")},null)])}},{field:"time",label:g("asset.time"),minWidth:"200"}]),{allSchemas:k}=C(I),{tableRegister:M,tableState:O,tableMethods:U}=y({fetchDataApi:async()=>({list:(await T("",R,X)).data.list}),immediate:!0}),{loading:L,dataList:P}=O,{getList:B,getElTableExpose:D}=U;function F(){return{background:"var(--el-fill-color-light)"}}const H=a(""),K=a(""),q=a(""),X=o({}),$=async e=>{let t="";"sub_host"==e&&(t=H.value),"sub_value"==e&&(t=K.value),"sub_ip"==e&&(t=q.value),X[e]=t,B()},J=a([]),Q=async()=>{j.confirm("Whether to delete?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{const e=await D(),t=(null==e?void 0:e.getSelectionRows())||[];J.value=t.map((e=>e.id)),await A(J.value,"subdomain"),B()})).catch((()=>{v({type:"info",message:"Delete canceled"})}))};let G=a(!1);const Y=async()=>{const e=await D(),t=(null==e?void 0:e.getSelectionRows())||[];J.value=t.map((e=>e.id)),0!=J.value.length?G.value=!0:G.value=!1};return(e,t)=>(m(),u(p(_),null,{default:d((()=>[s(p(S),null,{default:d((()=>[s(p(x),{style:{height:"min-content"}},{default:d((()=>[p(G)?(m(),u(p(c),{key:0,onClick:Q,type:"danger",size:"small"},{default:d((()=>[i("Dlete")])),_:1})):h("",!0),s(p(E),{columns:p(k).tableColumns,data:p(P),stripe:"","max-height":W.value,border:!0,loading:p(L),onSelectionChange:Y,rowKey:"id",resizable:!0,onRegister:p(M),onFilterChange:z,headerCellStyle:F,style:{fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji"}},null,8,["columns","data","max-height","loading","onRegister"])])),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-6481980b"]]);export{N as default};
