import{_ as e}from"./Table.vue_vue_type_script_lang-DW90GZY1.js";import{s as a,cc as t,af as l,x as s,ab as o,d as r,A as i,r as n,B as u,ag as c,C as d,a2 as p,o as m,c as g,F as v,a as f,i as y,w as _,G as j,D as b,J as h,n as x,L as S,M as w,u as k,H as A,t as V,j as D,e as z,f as C,S as P,l as E,Z as L,O as R}from"./index-DI3N4DDI.js";import{b as U,E as B,a as N}from"./el-dropdown-item-CS2CnWdl.js";import"./el-popper-B9xEIKf9.js";import{E as T}from"./el-pagination-D9CRNaLC.js";import"./el-tag-CQw-CsVu.js";import"./el-select-D7UeB03W.js";import{E as F,a as J}from"./el-checkbox-Df5USE6T.js";import{E as O}from"./el-switch-THXGS1Q1.js";/* empty css                          */import{_ as $}from"./Dialog.vue_vue_type_style_index_0_lang-CB0H7wcP.js";import{d as q}from"./index-y-9WA6qP.js";import{_ as I}from"./AddProject.vue_vue_type_script_setup_true_lang-ILdjmCwh.js";import{u as G}from"./useIcon-DOTDo2y0.js";const H=a({size:{type:[Number,String],values:t,default:"",validator:e=>l(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:s},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:o(String),default:"cover"}}),K={error:e=>e instanceof Event},M=["src","alt","srcset"],X=r({name:"ElAvatar"});const Z=w(S(r({...X,props:H,emits:K,setup(e,{emit:a}){const t=e,s=i("avatar"),o=n(!1),r=u((()=>{const{size:e,icon:a,shape:l}=t,o=[s.b()];return c(e)&&o.push(s.m(e)),a&&o.push(s.m("icon")),l&&o.push(s.m(l)),o})),S=u((()=>{const{size:e}=t;return l(e)?s.cssVarBlock({size:d(e)||""}):void 0})),w=u((()=>({objectFit:t.fit})));function k(e){o.value=!0,a("error",e)}return p((()=>t.src),(()=>o.value=!1)),(e,a)=>(m(),g("span",{class:x(f(r)),style:v(f(S))},[!e.src&&!e.srcSet||o.value?e.icon?(m(),y(f(b),{key:1},{default:_((()=>[(m(),y(j(e.icon)))])),_:1})):h(e.$slots,"default",{key:2}):(m(),g("img",{key:0,src:e.src,alt:e.alt,srcset:e.srcSet,style:v(f(w)),onError:k},null,44,M))],6))}}),[["__file","avatar.vue"]])),Q={class:"flex cursor-pointer"},W={class:"pr-16px"},Y={class:"name"},ee={class:"assets-info"},ae=r({__name:"ProjectList",props:{tableDataList:{type:Array,default:()=>[]},getProjectTag:{type:Function,required:!0},total:{type:Number,default:0},multipleSelection:{type:Boolean},selectedRows:{type:Array,default:()=>[]}},emits:["update:selectedRows"],setup(a,{emit:t}){const{t:l}=E(),{push:s}=k(),o=a,r=n(!1);let i="";const u=n(!1),c=()=>{u.value=!1},d=G({icon:"uil:edit"}),v=G({icon:"material-symbols:delete-outline"}),j=G({icon:"carbon:data-vis-1"}),b=e=>{"edit"==e.type?(async e=>{i=e,u.value=!0})(e.id):"del"==e.type?(e=>{const a=n(!1);L({title:"Delete",draggable:!0,message:()=>R("div",{style:{display:"flex",alignItems:"center"}},[R("p",{style:{margin:"0 10px 0 0"}},l("task.delAsset")),R(O,{modelValue:a.value,"onUpdate:modelValue":e=>{a.value=e}})])}).then((async()=>{await q([e],a.value)}))})(e.id):le(e.id)},h=()=>{o.getProjectTag(x.value,S.value)},x=n(1),S=n(50),w=n(!1),H=n(!1),K=n(!1),M=t,X=n([...o.selectedRows]);p(X,(e=>{JSON.stringify(e)!==JSON.stringify(o.selectedRows)&&M("update:selectedRows",e),ae.value=e.length===o.tableDataList.length})),p((()=>o.selectedRows),(e=>{X.value=[...e]})),p((()=>o.tableDataList),(e=>{ae.value=X.value.length===e.length}));const ae=n(!1),te=()=>{ae.value?X.value=o.tableDataList.map((e=>e.id)):X.value=[]},le=e=>{s(`/project-management/project-detail?id=${e}`)};return(t,s)=>(m(),g(P,null,[a.multipleSelection?(m(),y(f(F),{key:0,modelValue:ae.value,"onUpdate:modelValue":s[0]||(s[0]=e=>ae.value=e),onChange:te},{default:_((()=>[A(V(f(l)("common.selectAll")),1)])),_:1},8,["modelValue"])):D("",!0),z(f(J),{modelValue:X.value,"onUpdate:modelValue":s[1]||(s[1]=e=>X.value=e)},{default:_((()=>[z(f(e),{columns:[],data:a.tableDataList,loading:r.value,"custom-content":"","card-wrap-style":{width:"210px",marginBottom:"20px",marginRight:"20px"}},{content:_((e=>[z(f(U),{trigger:"contextmenu",onCommand:b},{dropdown:_((()=>[z(f(B),null,{default:_((()=>[z(f(N),{icon:f(d),command:{type:"edit",id:e.id}},{default:_((()=>[A(V(f(l)("common.edit")),1)])),_:2},1032,["icon","command"]),z(f(N),{icon:f(v),command:{type:"del",id:e.id}},{default:_((()=>[A(V(f(l)("common.delete")),1)])),_:2},1032,["icon","command"]),z(f(N),{icon:f(j),command:{type:"aggregation",id:e.id}},{default:_((()=>[A(V(f(l)("project.aggregation")),1)])),_:2},1032,["icon","command"])])),_:2},1024)])),default:_((()=>[C("div",Q,[a.multipleSelection?(m(),y(f(F),{key:0,value:e.id,class:"pr-16px"},null,8,["value"])):D("",!0),C("div",W,[""!=e.logo?(m(),y(f(Z),{key:0,src:e.logo,class:"avatar",fit:"cover"},null,8,["src"])):(m(),y(f(Z),{key:1,class:"avatar avatar-placeholder"},{default:_((()=>[A(V(e.name.charAt(0)),1)])),_:2},1024))]),C("div",null,[C("div",Y,V(e.name),1),C("div",ee,V(f(l)("project.totalAssets"))+" : "+V(e.AssetCount),1)])])])),_:2},1024)])),_:1},8,["data","loading"])])),_:1},8,["modelValue"]),z(f(T),{"current-page":x.value,"onUpdate:currentPage":s[2]||(s[2]=e=>x.value=e),"page-size":S.value,"onUpdate:pageSize":s[3]||(s[3]=e=>S.value=e),"page-sizes":[50,70,100,200,400],small:w.value,disabled:K.value,background:H.value,layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:h,onCurrentChange:h},null,8,["current-page","page-size","small","disabled","background","total"]),z(f($),{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=e=>u.value=e),title:f(l)("common.edit"),center:"",style:{"border-radius":"15px","box-shadow":"5px 5px 10px rgba(0, 0, 0, 0.3)"}},{default:_((()=>[z(I,{closeDialog:c,projectid:f(i),getProjectData:t.$props.getProjectTag,schedule:!1},null,8,["projectid","getProjectData"])])),_:1},8,["modelValue","title"])],64))}});export{ae as _};
