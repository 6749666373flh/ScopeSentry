import{d as e,dE as t,W as l,r as a,N as o,e as i,H as s,S as n,R as r,o as m,i as u,w as d,a as p,I as c,j as h,Y as f,l as b,Z as j,a0 as g,_ as v}from"./index-M10etHi6.js";import{u as y}from"./useTable-D1SpGQrv.js";import{E as x}from"./el-card-t9G4RzyN.js";import{E as S,a as _}from"./el-col-CNNqU05O.js";import{E as w}from"./el-text-Bjb0AW85.js";import{_ as E}from"./Table.vue_vue_type_script_lang-9x4PpCFP.js";import{u as C}from"./useCrudSchemas-AFee5KbM.js";import{d as T}from"./index-Dyp2AP2b.js";import{r as N}from"./index-Dm5pqZ45.js";import"./el-table-column-Ct9f4goZ.js";import"./el-popper-D4B4f19J.js";import"./index-BEjIPMze.js";import"./debounce-DMlGG38r.js";import"./el-checkbox-C3AB5jlc.js";import"./isArrayLikeObject-CmTAjD1K.js";import"./raf-ChTn_6oX.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-tag-DC4eDhDo.js";import"./el-pagination-DKV_XtBQ.js";import"./el-select-CQG17R-n.js";import"./strings-DKCbZfke.js";import"./useInput-DFHJnJFD.js";import"./el-image-viewer-CAmikf02.js";import"./el-empty-DtGCvYos.js";import"./tsxHelper-Cy1d83nC.js";import"./el-dropdown-item-6vek0JLM.js";import"./castArray-D86glhSN.js";import"./refs-DEjEOHCT.js";import"./index-D4oHVQnn.js";import"./tree-BfZhwLPs.js";import"./index-MoA9wocQ.js";function W(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!f(e)}const A=v(e({__name:"Subdomain",setup(e){const{t:f}=b(),{query:v}=t();l((()=>{R(),window.addEventListener("resize",R)}));const A=a(0),R=()=>{const e=window.innerHeight||document.documentElement.clientHeight;A.value=.8*e};a("");const I=o({});I.project=[v.id];const V=async e=>{Object.assign(I,e),L()},k=o([{field:"selection",type:"selection",minWidth:"55"},{field:"index",label:f("tableDemo.index"),type:"index",minWidth:"30"},{field:"host",label:f("subdomain.subdomainName"),minWidth:"200",formatter:(e,t,l)=>e.count?i(n,null,[i(w,null,W(l)?l:{default:()=>[l]}),i(w,{type:"info"},{default:()=>[s("("),e.count,s(")")]})]):i(w,null,W(l)?l:{default:()=>[l]}),slots:{header:()=>i("div",null,[i("span",null,[f("subdomain.subdomainName")]),i(r,{modelValue:B.value,"onUpdate:modelValue":e=>B.value=e,placeholder:"Search",style:"width: 200px; margin-left: 10px;",size:"small",onChange:()=>Y("sub_host")},null)])}},{field:"type",label:f("subdomain.recordType"),minWidth:"200",columnKey:"type",filters:[{text:"A",value:"A"},{text:"NS",value:"NS"},{text:"CNAME",value:"CNAME"},{text:"PTR",value:"PTR"},{text:"TXT",value:"TXT"}]},{field:"value",label:f("subdomain.recordValue"),minWidth:"250",formatter:(e,t,l)=>{let a="";return l.forEach(((e,t)=>{a+=`${e}\r\n`})),a},slots:{header:()=>i("div",null,[i("span",null,[f("subdomain.recordValue")]),i(r,{modelValue:K.value,"onUpdate:modelValue":e=>K.value=e,placeholder:"Search",style:"width: 200px; margin-left: 10px;",size:"small",onChange:()=>Y("sub_value")},null)])}},{field:"ip",label:"IP",minWidth:"150",formatter:(e,t,l)=>{let a="";return l.forEach(((e,t)=>{a+=`${e}\r\n`})),a},slots:{header:()=>i("div",null,[i("span",null,[s("IP")]),i(r,{modelValue:X.value,"onUpdate:modelValue":e=>X.value=e,placeholder:"Search",style:"width: 180px; margin-left: 10px;",size:"small",onChange:()=>Y("sub_ip")},null)])}},{field:"time",label:f("asset.time"),minWidth:"200"}]),{allSchemas:z}=C(k),{tableRegister:H,tableState:U,tableMethods:D}=y({fetchDataApi:async()=>({list:(await T("",I,$)).data.list}),immediate:!0}),{loading:F,dataList:O}=U,{getList:L,getElTableExpose:M}=D;function P(){return{background:"var(--el-fill-color-light)"}}const B=a(""),K=a(""),X=a(""),$=o({}),Y=async e=>{let t="";"sub_host"==e&&(t=B.value),"sub_value"==e&&(t=K.value),"sub_ip"==e&&(t=X.value),$[e]=t,L()},Z=a([]),q=async()=>{j.confirm("Whether to delete?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{const e=await M(),t=(null==e?void 0:e.getSelectionRows())||[];Z.value=t.map((e=>e.id)),await N(Z.value,"subdomain"),L()})).catch((()=>{g({type:"info",message:"Delete canceled"})}))};let J=a(!1);const G=async()=>{const e=await M(),t=(null==e?void 0:e.getSelectionRows())||[];Z.value=t.map((e=>e.id)),0!=Z.value.length?J.value=!0:J.value=!1};return(e,t)=>(m(),u(p(_),null,{default:d((()=>[i(p(S),null,{default:d((()=>[i(p(x),{style:{height:"min-content"}},{default:d((()=>[p(J)?(m(),u(p(c),{key:0,onClick:q,type:"danger",size:"small"},{default:d((()=>[s("Dlete")])),_:1})):h("",!0),i(p(E),{columns:p(z).tableColumns,data:p(O),stripe:"","max-height":A.value,border:!0,loading:p(F),onSelectionChange:G,rowKey:"id",resizable:!0,onRegister:p(H),onFilterChange:V,headerCellStyle:P,style:{fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji"}},null,8,["columns","data","max-height","loading","onRegister"])])),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-74d55aa1"]]);export{A as default};
