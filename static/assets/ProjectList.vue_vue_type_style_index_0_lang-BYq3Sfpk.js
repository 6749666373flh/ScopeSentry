import{_ as e}from"./Table.vue_vue_type_script_lang-DR1NSdjE.js";import{Y as a,ca as t,a2 as l,bm as s,Z as o,d as r,a6 as i,r as n,a7 as u,a3 as c,b6 as d,O as p,o as m,c as g,aH as v,a as y,i as f,w as _,aI as j,A as b,a8 as h,n as x,a9 as S,ag as w,u as k,y as V,t as A,j as z,e as D,f as P,F as C,l as E,J as R,v as L}from"./index-uu-sb1xd.js";import{b as U,E as N,a as T}from"./el-dropdown-item-4FW6tlcv.js";import"./el-popper-Q1oSUg9s.js";import{E as $}from"./el-pagination-CDDD20a2.js";import"./el-tag-DNcAhGYG.js";import"./el-select-Cy5vHOir.js";import{E as B,a as F}from"./el-checkbox--BT0mwB_.js";import{E as I}from"./el-switch-C75eVKe5.js";/* empty css                          */import{_ as J}from"./Dialog.vue_vue_type_style_index_0_lang-CGAs61e8.js";import{d as O}from"./index-udsnp7GI.js";import{_ as q}from"./AddProject.vue_vue_type_script_setup_true_lang-CttctUl0.js";import{u as H}from"./useIcon-D1SBaDFU.js";const K=a({size:{type:[Number,String],values:t,default:"",validator:e=>l(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:s},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:o(String),default:"cover"}}),Y={error:e=>e instanceof Event},Z=["src","alt","srcset"],G=r({name:"ElAvatar"});const M=w(S(r({...G,props:K,emits:Y,setup(e,{emit:a}){const t=e,s=i("avatar"),o=n(!1),r=u((()=>{const{size:e,icon:a,shape:l}=t,o=[s.b()];return c(e)&&o.push(s.m(e)),a&&o.push(s.m("icon")),l&&o.push(s.m(l)),o})),S=u((()=>{const{size:e}=t;return l(e)?s.cssVarBlock({size:d(e)||""}):void 0})),w=u((()=>({objectFit:t.fit})));function k(e){o.value=!0,a("error",e)}return p((()=>t.src),(()=>o.value=!1)),(e,a)=>(m(),g("span",{class:x(y(r)),style:v(y(S))},[!e.src&&!e.srcSet||o.value?e.icon?(m(),f(y(b),{key:1},{default:_((()=>[(m(),f(j(e.icon)))])),_:1})):h(e.$slots,"default",{key:2}):(m(),g("img",{key:0,src:e.src,alt:e.alt,srcset:e.srcSet,style:v(y(w)),onError:k},null,44,Z))],6))}}),[["__file","avatar.vue"]])),Q={class:"flex cursor-pointer"},W={class:"pr-16px"},X={class:"name"},ee={class:"assets-info"},ae=r({__name:"ProjectList",props:{tableDataList:{type:Array,default:()=>[]},getProjectTag:{type:Function,required:!0},total:{type:Number,default:0},multipleSelection:{type:Boolean},selectedRows:{type:Array,default:()=>[]}},emits:["update:selectedRows"],setup(a,{emit:t}){const{t:l}=E(),{push:s}=k(),o=a,r=n(!1);let i="";const u=n(!1),c=()=>{u.value=!1},d=H({icon:"uil:edit"}),v=H({icon:"material-symbols:delete-outline"}),j=H({icon:"carbon:data-vis-1"}),b=e=>{"edit"==e.type?(async e=>{i=e,u.value=!0})(e.id):"del"==e.type?(e=>{const a=n(!1);R({title:"Delete",draggable:!0,message:()=>L("div",{style:{display:"flex",alignItems:"center"}},[L("p",{style:{margin:"0 10px 0 0"}},l("task.delAsset")),L(I,{modelValue:a.value,"onUpdate:modelValue":e=>{a.value=e}})])}).then((async()=>{await O([e],a.value)}))})(e.id):le(e.id)},h=()=>{o.getProjectTag(x.value,S.value)},x=n(1),S=n(50),w=n(!1),K=n(!1),Y=n(!1),Z=t,G=n([...o.selectedRows]);p(G,(e=>{JSON.stringify(e)!==JSON.stringify(o.selectedRows)&&Z("update:selectedRows",e),ae.value=e.length===o.tableDataList.length})),p((()=>o.selectedRows),(e=>{G.value=[...e]})),p((()=>o.tableDataList),(e=>{ae.value=G.value.length===e.length}));const ae=n(!1),te=()=>{ae.value?G.value=o.tableDataList.map((e=>e.id)):G.value=[]},le=e=>{s(`/project-management/project-detail?id=${e}`)};return(t,s)=>(m(),g(C,null,[a.multipleSelection?(m(),f(y(B),{key:0,modelValue:ae.value,"onUpdate:modelValue":s[0]||(s[0]=e=>ae.value=e),onChange:te},{default:_((()=>[V(A(y(l)("common.selectAll")),1)])),_:1},8,["modelValue"])):z("",!0),D(y(F),{modelValue:G.value,"onUpdate:modelValue":s[1]||(s[1]=e=>G.value=e)},{default:_((()=>[D(y(e),{columns:[],data:a.tableDataList,loading:r.value,"custom-content":"","card-wrap-style":{width:"210px",marginBottom:"20px",marginRight:"20px"}},{content:_((e=>[D(y(U),{trigger:"contextmenu",onCommand:b},{dropdown:_((()=>[D(y(N),null,{default:_((()=>[D(y(T),{icon:y(d),command:{type:"edit",id:e.id}},{default:_((()=>[V(A(y(l)("common.edit")),1)])),_:2},1032,["icon","command"]),D(y(T),{icon:y(v),command:{type:"del",id:e.id}},{default:_((()=>[V(A(y(l)("common.delete")),1)])),_:2},1032,["icon","command"]),D(y(T),{icon:y(j),command:{type:"aggregation",id:e.id}},{default:_((()=>[V(A(y(l)("project.aggregation")),1)])),_:2},1032,["icon","command"])])),_:2},1024)])),default:_((()=>[P("div",Q,[a.multipleSelection?(m(),f(y(B),{key:0,value:e.id,class:"pr-16px"},null,8,["value"])):z("",!0),P("div",W,[""!=e.logo?(m(),f(y(M),{key:0,src:e.logo,class:"avatar",fit:"cover"},null,8,["src"])):(m(),f(y(M),{key:1,class:"avatar avatar-placeholder"},{default:_((()=>[V(A(e.name.charAt(0)),1)])),_:2},1024))]),P("div",null,[P("div",X,A(e.name),1),P("div",ee,A(y(l)("project.totalAssets"))+" : "+A(e.AssetCount),1)])])])),_:2},1024)])),_:1},8,["data","loading"])])),_:1},8,["modelValue"]),D(y($),{"current-page":x.value,"onUpdate:currentPage":s[2]||(s[2]=e=>x.value=e),"page-size":S.value,"onUpdate:pageSize":s[3]||(s[3]=e=>S.value=e),"page-sizes":[50,70,100,200,400],small:w.value,disabled:Y.value,background:K.value,layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:h,onCurrentChange:h},null,8,["current-page","page-size","small","disabled","background","total"]),D(y(J),{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=e=>u.value=e),title:y(l)("common.edit"),center:"",style:{"border-radius":"15px","box-shadow":"5px 5px 10px rgba(0, 0, 0, 0.3)"}},{default:_((()=>[D(q,{closeDialog:c,projectid:y(i),getProjectData:t.$props.getProjectTag,schedule:!1},null,8,["projectid","getProjectData"])])),_:1},8,["modelValue","title"])],64))}});export{ae as _};
